############
# Personal #
############

IMAPAccount personal
Host imap.fastmail.com
Port 993
# Host imaps-proxy.fastmail.com
# Port 80
AuthMech LOGIN
User benswift@fastmail.com
PassCmd "security find-generic-password -a benswift@fastmail.com -s mbsync-fastmail -w"
TLSType IMAPS
PipelineDepth 50

IMAPStore personal-remote
Account personal

MaildirStore personal-local
Path ~/Maildir/personal/
Inbox ~/Maildir/personal/INBOX
SubFolders Verbatim

Channel personal
Far :personal-remote:
Near :personal-local:
Patterns * !"Calendar" !"Contacts"
Create Near
Sync All
Expunge Both
SyncState *

#################
# ANU Office365 #
#################

IMAPAccount anu
Host outlook.office365.com
Port 993
AuthMech XOAUTH2
User u2548636@anu.edu.au
PassCmd "/Users/ben/.dotfiles/mutt_oauth2.py --decryption-pipe 'security find-generic-password -a u2548636@anu.edu.au -s mutt_oauth2_anu -w' --encryption-pipe '/Users/ben/.dotfiles/keychain-store.sh u2548636@anu.edu.au mutt_oauth2_anu' /Users/ben/.dotfiles/anu_oauth2_keychain_stub"
TLSType IMAPS
PipelineDepth 1
Timeout 120

IMAPStore anu-remote
Account anu

MaildirStore anu-local
Path ~/Maildir/anu/
Inbox ~/Maildir/anu/INBOX
SubFolders Verbatim

Channel anu
Far :anu-remote:
Near :anu-local:
Patterns * !"Conversation History" !"Calendar" !"Contacts" !"Tasks" !"Journal" !"Clutter" !"Notes" !"Outbox"
Create Near
Sync All
Expunge Both
SyncState *
MaxMessages 1000

###################################
# PhD Convenor (delegated mailbox) #
###################################

IMAPAccount phdconvenor
Host outlook.office365.com
Port 993
AuthMech XOAUTH2
User phdconvenor.cybernetics@anu.edu.au
PassCmd "/Users/ben/.dotfiles/mutt_oauth2.py --decryption-pipe 'security find-generic-password -a u2548636@anu.edu.au -s mutt_oauth2_anu -w' --encryption-pipe '/Users/ben/.dotfiles/keychain-store.sh u2548636@anu.edu.au mutt_oauth2_anu' /Users/ben/.dotfiles/anu_oauth2_keychain_stub"
TLSType IMAPS
PipelineDepth 1
Timeout 120

IMAPStore phdconvenor-remote
Account phdconvenor

MaildirStore phdconvenor-local
Path ~/Maildir/phdconvenor/
Inbox ~/Maildir/phdconvenor/INBOX
SubFolders Verbatim

# Channels for each folder (pattern matching doesn't work with this delegated mailbox)
Channel phdconvenor-inbox
Far :phdconvenor-remote:INBOX
Near :phdconvenor-local:INBOX
Create Near
Sync All
Expunge Both
SyncState *

Channel phdconvenor-sent
Far :phdconvenor-remote:"Sent Items"
Near :phdconvenor-local:"Sent Items"
Create Near
Sync All
Expunge Both
SyncState *

Channel phdconvenor-drafts
Far :phdconvenor-remote:Drafts
Near :phdconvenor-local:Drafts
Create Near
Sync All
Expunge Both
SyncState *

Channel phdconvenor-archive
Far :phdconvenor-remote:Archive
Near :phdconvenor-local:Archive
Create Near
Sync All
Expunge Both
SyncState *

Channel phdconvenor-deleted
Far :phdconvenor-remote:"Deleted Items"
Near :phdconvenor-local:"Deleted Items"
Create Near
Sync All
Expunge Both
SyncState *

Group phdconvenor
Channel phdconvenor-inbox
Channel phdconvenor-sent
Channel phdconvenor-drafts
Channel phdconvenor-archive
Channel phdconvenor-deleted

## Local Variables:
## mode: conf-unix
## End:
