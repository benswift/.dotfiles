# msmtp configuration file

# Default settings
defaults
auth on
tls on
tls_trust_file /etc/ssl/cert.pem
logfile ~/.msmtp.log

# ANU Office 365 account
account anu
host smtp.office365.com
port 587
from ben.swift@anu.edu.au
user u2548636@anu.edu.au
auth xoauth2
passwordeval "/Users/ben/.dotfiles/mail/mutt_oauth2.py --decryption-pipe 'security find-generic-password -a u2548636@anu.edu.au -s mutt_oauth2_anu -w' --encryption-pipe '/Users/ben/.dotfiles/mail/keychain-store.sh u2548636@anu.edu.au mutt_oauth2_anu' /Users/ben/.dotfiles/mail/anu_oauth2_keychain_stub"

# PhD Convenor ANU account (delegated mailbox)
account phdconvenor
host smtp.office365.com
port 587
from phdconvenor.cybernetics@anu.edu.au
user u2548636@anu.edu.au
auth xoauth2
passwordeval "/Users/ben/.dotfiles/mail/mutt_oauth2.py --decryption-pipe 'security find-generic-password -a u2548636@anu.edu.au -s mutt_oauth2_anu -w' --encryption-pipe '/Users/ben/.dotfiles/mail/keychain-store.sh u2548636@anu.edu.au mutt_oauth2_anu' /Users/ben/.dotfiles/mail/anu_oauth2_keychain_stub"

# Personal Fastmail account
account personal
host smtp.fastmail.com
port 587
from ben@benswift.me
user benswift@fastmail.com
auth plain
passwordeval "security find-generic-password -a benswift@fastmail.com -s mbsync-fastmail -w"

# Set a default account
account default : personal
