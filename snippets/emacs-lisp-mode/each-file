# -*- mode: snippet -*-
# name: each-file
# key: eachfile
# --
(-each
    (directory-files "${1:`(expand-file-name "~")`}" :full "\.${2:ext}$")
  (lambda (fname)
    (with-current-buffer (find-file fname)
      (goto-char (point-min))
      $0
      (write-file fname)
      (kill-buffer (current-buffer)))))